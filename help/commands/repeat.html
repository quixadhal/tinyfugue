<title>TinyFugue: /repeat</title>
<!--"@delay"-->
<!--"@/repeat"-->
<h1>/repeat</h1>

<p>
  Usage:

<p>
  <a href="../commands/repeat.html">/REPEAT</a> [-w[<i>world</i>]]
  [-n] {[-<i>time</i>]|-S|-P} <i>count</i> <i>command</i><br>
<hr>

<p>
  Repeats <i>command</i>, <i>count</i> times.  <i>Command</i> may be any
  legal <a href="../topics/macros.html">macro</a> body.  If <i>count</i>
  is "<code>i</code>", the <i>command</i> repeats indefinitely.
  This works through a <a href="../topics/processes.html">process</a>,
  which runs concurrently with normal operations.

<p>
  <a href="../topics/options.html">Options:</a>
  <dl>
  <dt>-w[<i>world</i>]
	<dd><i>Command</i> will execute with <i>world</i> as the
	    <a href="../topics/sockets.html#current">current</a> world.
	    If <i>world</i> is omitted, it is assumed to be the world that
	    was <a href="../topics/sockets.html#current">current</a> for
	    /repeat.
	    If this option is omitted entirely, the
	    <i>command</i>'s 
	    <a href="../topics/sockets.html#current">current</a> world will be
	    whatever world happens to be in the
	    <a href="../topics/sockets.html#foreground">foreground</a>
	    when it's time for <i>command</i> to run.
  <dt>-<i>time</i>
	<dd><i>Time</i> is the delay between each execution of <i>command</i>.
	    <i>Time</i> may be specified in the format
	    "<i>hours</i>:<i>minutes</i>:<i>seconds</i>",
	    "<i>hours</i>:<i>minutes</i>", or "<i>seconds</i>"
	    (<i>seconds</i> may be specified to the nearest microsecond).
  <dt>-S
	<dd>The repeat will run synchronously.
  <dt>-P
	<dd>The repeat will run whenever a
	<a href="../topics/prompts.html">prompt</a> is received.
  <dt>-n
	<dd>When combined with the -<i>time</i> option, this makes the first
	execution of <i>command</i> happen with no delay.
  </dl>

  At most one of the -S, -P, and -<i>time</i> options should be specified.
  If none are specified, the delay between each execution of <i>command</i>
  is determined by the <a href="../topics/variables.html">variable</a>
  <a href="../topics/special_variables.html#ptime">%{ptime}</a>.
  See "<a href="../topics/processes.html">processes</a>" for more information
  on process timing.

<p>
  The <i>command</i> undergoes <a href="../topics/macros.html">macro</a> body
  <a href="../topics/substitution.html">substitution</a> when it is executed.

<p>
  An asynchronous <a href="../commands/repeat.html">/repeat</a> (without -S)
  returns the pid of the new <a href="../topics/processes.html">process</a>,
  or 0 if an error occurred.
  A synchronous <a href="../commands/repeat.html">/repeat</a>
  returns the return value of the last command.

<p>
  Since the first run is not done until after the first interval
  (for <a href="../commands/repeat.html">/repeat</a> without -S or -n),
  a useful trick is to use
  "<a href="../commands/repeat.html">/repeat</a> -<i>time</i> 1
  <i>command</i>" to delay the execution of a single command.

<p>
  Example:
<pre>
    <a href="../commands/repeat.html">/repeat</a> -0:30 1 <a href="../commands/echo.html">/echo</a> -ab Dinner's ready
</pre>

<p>
  See: <a href="../topics/processes.html">processes</a>,
  <a href="../topics/special_variables.html#ptime">%ptime</a>,
  <a href="../commands/at.html">/at</a>

<p>
<!-- END -->
<hr>
  <a href="./">Back to index</a><br>
  <a href="http://tf.tcp.com/~hawkeye/tf/">Back to tf home page</a>
<hr>
  <a href="../topics/copyright.html">Copyright</a> &copy; 1995, 1996, 1997, 1998, 1999, 2002, 2003 <a href="http://tf.tcp.com/~hawkeye/">Ken Keys</a>
